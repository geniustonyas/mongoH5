<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8">
  <meta http-equiv="x-dns-prefetch-control" content="on">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-touch-fullscreen" content="yes">
  <meta name="apple-mobile-web-app-title" content="<%- title %>">
  <meta name="format-detection" content="telephone=no">
  <meta name="format-detection" content="email=no">
  <meta name="theme-color" content="#000">
  <link rel="apple-touch-icon-precomposed" href="/logo-1.png">
  <link rel="apple-touch-icon" href="/logo-1.png">
  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico">
  <meta name="application-name" content="<%- title %>">
  <title> <%- title %> </title>
  <meta name="keywords" content="<%- title %>">
  <meta name="description" content="<%- title %>">
  <link rel="stylesheet" href="/js/plyr.min.css">
  <script src="/js/hls.min.js" defer></script>
  <script src="/js/plyr.min.js" defer></script>
  
  <script>
    function getMainDomain(hostname) {
      const parts = hostname.split('.');
      if (parts.length > 2) {
        return parts.slice(-2).join('.');
      }
      return hostname;
    }

    // 获取当前域名
    const currentDomain = getMainDomain(window.location.hostname);

    // 配置域名和对应的统计代码
    const trackingCodes = {
      'mg95.cc': `
        var _czc = _czc || [];
        (function () {
          var um = document.createElement("script");
          um.src = "https://v1.cnzz.com/z.js?id=1281395151&async=1";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(um, s);
        })();
      `
    };

    // 默认统计代码
    const defaultTrackingCode = `
      // 默认站长统计代码
      var _czc = _czc || [];
      (function () {
        var um = document.createElement("script");
        um.src = "https://s4.cnzz.com/z.js?id=1281390562&async=1";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(um, s);
      })();
    `;
    // 动态插入统计代码
    const trackingCode = trackingCodes[currentDomain] || defaultTrackingCode;
    const script = document.createElement('script');
    script.type = 'text/javascript';
    script.innerHTML = trackingCode;
    document.head.appendChild(script);

    // 禁止safari缩放
    window.onload = function () {
      document.addEventListener('touchstart', function (event) {
        if (event.touches.length > 1) {
          event.preventDefault()
        }
      }, { passive: false }) // 明确指定为非被动

      var lastTouchEnd = 0
      document.addEventListener('touchend', function (event) {
        var now = (new Date()).getTime()
        if (now - lastTouchEnd <= 100) {
          event.preventDefault()
        }
        lastTouchEnd = now
      }, { passive: false }) // 明确指定为非被动

      document.addEventListener('gesturestart', function (event) {
        event.preventDefault()
      }, { passive: false }) // 明确指定为非被动
    }
  </script>
 
  
</head>

<body>
    <div id="app"></div>
    <script type="module" src="/src/main.ts"></script>
</body>

</html>
